<!DOCTYPE html>
<html>
	<head>
		<title>9-Key Keyboard Profile System</title>
	</head>

	<body>
		<div>
			<h1>Welcome to the 9-Key Keyboard! (ALPHA)</h1>
			<p>Here, you can manage your profile setting information.</p> 
			<p>For the Alpha, we have provided you with a test user to play around with. (This test user is hard coded in the back end, so modifying code here won't help.)</p>
			<p>If you do end up running the backend, please don't mess around with our database other than this user! :)</p>
			<p>Note that most of our Alpha work for the Profile System is in the RESTful API that this connects to. This front end is mostly just a proof of concept that shows the back end works if you don't want to send requests directly to a back end.</p>
		</div>
		<div id="profile_ops">
			<div id="profile_view">
				<h2>Your Profiles</h2>
				<ul id="profile_view_list"></ul>
			</div>
			<div id="profile_create">
				<h4>Create Profile</h4>
				<label for="profile_create_name">Profile Name: </label>
				<input type="text" id="profile_create_name">
				<button onclick="createProfile()">Create Profile</button>
			</div>
			<div id="profile_delete">
				<h4>Delete Profile</h4>
				<label for="profile_create_name">Profile Name: </label>
				<input type="text" id="profile_delete_name">
				<button onclick="deleteProfile()">Delete Profile</button>
			</div>
		</div>
		<div>
			<form id="test">
				<input name="data" type="file" id="test_file"/>
			</form>
			<button onclick="foo()">CLICK ME</button>
		</div>
		<div id="word_ops">
			<h2>Word List (click a button above!)</h2>
			<div id="word_view"></div>
		</div>
	</body>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
	<script>
$(function() {
	// $.ajax("/api/v1/profiles", {
	// 	type: "GET",
	// 	success: showProfiles
	// });
});

function showProfiles(profiles) {
	console.log(profiles);
	var profileList = "";
	for (var profile in profiles) {
		profileList += `<li>${profile}`
		profileList += `<button onclick="showWords('${profile}')">See my words!</button>`
		profileList += "</li>"
	}

	$("#profile_view_list").html(profileList);
}

function showWords(profileName) {
	$.ajax(`/api/v1/words/${profileName}`, {
		type: "GET",
		success: function(wordData) {
			console.log(wordData);
			$("#word_view").html(wordData.words.join(", "));
		}
	});
}

function createProfile() {
	var profile = $("#profile_create_name").val();
	$.ajax("/api/v1/profiles", {
		type: "POST",
		contentType: "application/json",
		data: JSON.stringify({profileName: profile}),
		success: function() {
			window.location.reload();
		}
	})
}

function deleteProfile() {
	var profileName = $("#profile_delete_name").val();
	$.ajax(`/api/v1/profiles/${profileName}`, {
		type: "DELETE",
		success: function() {
			window.location.reload();
		}
	})
}

</script>
</html>